
/**
 * Require a package or file.
 *
 * @param  {String} name Package or filename
 * @return {Any} Module exports.
 */
var i = 0;
function require(name) {
  var module;

  // Check if it matches a package
  if (require.packages[name]) {
    var package = require.packages[name];

    // Load the main file.
    module = package.modules[package.main];

    if (!module) {
      throw new Error("Cannot find main module: " + package.main + " within the " + package.name + " package.");
    }

  } else if (name.match(require.regexp.relative)) {

    name = name.replace(require.regexp.relative, '');

    if (!name.match(require.regexp.ext)) {
      name += '.js';
    }

    var current = require.stack[require.stack.length - 1];
    var package = current.package;

    // Go back a directory
    if (name.match(/\.\./)) {
      var dirs = name.split('../');
      var n = dirs[dirs.length - 1];
      dirs.pop();
      var currentDir = current.name.replace(/\/[A-Za-z0-9\-]+\.js/, '');
      var currentDirs = currentDir.split('/');
      dirs.forEach(function(d) {
        currentDirs.pop();
      });

      currentDirs.push(n);
      var name = currentDirs.join('/');
      if (!name.match(require.regexp.ext)) {
        name += '.js';
      }

    } else if (current.name.match(/\//)) {
      var orig = name;
      var directories = require.stack[require.stack.length - 1].name.split('/');
      directories.pop();
      directories.join('/');
      name = directories + '/' + name;
      if (!package.modules[name]) {
        name = orig;
        directories = require.stack[require.stack.length - 2].name.split('/');
        directories.pop();
        directories.join('/');
        name = directories + '/' + name;
        if (name.charAt(0) === '/') {
          name = name.substr(1);
        }
      }

    }

    module = package.modules[name];
  }


  if (module) {
    require.stack.push(module);
    require.current = module;

    if (name === 'tower-app') {
      i++;
      if (i >= 2) {
        return module.cache;
      }
    }

    if (typeof module.cache !== "undefined") {
      return module.cache;
    }

    try {
      module.cache = new Function(decodeURI(module.source))()({}, require, module, '', '');
      require.stack.pop();
    } catch(e) {
      console.error(e.stack);
      throw e;
    } finally {

      if (typeof module.cache === "undefined") {
        module.cache = null;
      }

      if (module.cache == {}) {
        module.cache = undefined;
      }

      return module.cache;
    }
  }

  throw new Error("Failed to require `" + name + "`.");
}

require.regexp = {
  relative: /^\.\//,
  ext: /\.js$/,
  dir: /\//g
}

/**
 * Package Registry
 *
 * @type {Object}
 */

require.packages = {};

/**
 * Module Registry
 *
 * @type {Object}
 */

require.modules  = {};

/**
 * Current Package Object
 *
 * @type {Object}
 */

require.current  = {};

/**
 * Require Stack.
 *
 * @type {Array}
 */

require.stack = [];

/**
 * Define a new or current package for use
 * with the module method.
 *
 * @param {String} package Package name.
 * @param {String} main Main file.
 */

require.package = function(package, main) {
  require.current = require.packages[package] = {
    main: main,
    name: package,
    modules: []
  }
};

/**
 * Define a new module.
 *
 * @param {String} name Module name
 */

require.module = function(name, source) {
  require.current.modules[name] = {
    module: { exports: {} },
    cache: undefined,
    name: name,
    source: source,
    package: require.current
  };
};

/**
 * @todo
 */

require.alias = function() {

};require.package("path-to-regexp", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {module.exports=pathtoRegexp;function%20pathtoRegexp(path,keys,options)%7Boptions=options%7C%7C%7B%7D;var%20sensitive=options.sensitive;var%20strict=options.strict;keys=keys%7C%7C%5B%5D;if(path%20instanceof%20RegExp)return%20path;if(path%20instanceof%20Array)path=%22(%22+path.join(%22%7C%22)+%22)%22;path=path.concat(strict?%22%22:%22/?%22).replace(/%5C/%5C(/g,%22(?:/%22).replace(/(%5C/)?(%5C.)?:(%5Cw+)(?:(%5C(.*?%5C)))?(%5C?)?(%5C*)?/g,function(_,slash,format,key,capture,optional,star)%7Bkeys.push(%7Bname:key,optional:!!optional%7D);slash=slash%7C%7C%22%22;return%22%22+(optional?%22%22:slash)+%22(?:%22+(optional?slash:%22%22)+(format%7C%7C%22%22)+(capture%7C%7Cformat&&%22(%5B%5E/.%5D+?)%22%7C%7C%22(%5B%5E/%5D+?)%22)+%22)%22+(optional%7C%7C%22%22)+(star?%22(/*)?%22:%22%22)%7D).replace(/(%5B%5C/.%5D)/g,%22%5C%5C$1%22).replace(/%5C*/g,%22(.*)%22);return%20new%20RegExp(%22%5E%22+path+%22$%22,sensitive?%22%22:%22i%22)%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-path-to-regexp/index.js");
require.package("tower-route", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20Emitter=require(%22tower-emitter%22),pathToRegexp=require(%22path-to-regexp%22),slice=%5B%5D.slice,context;exports=module.exports=route;exports.Route=Route;function%20route(name,path,options)%7Bif(typeof%20name===%22object%22)return;if(1==arguments.length&&routes%5Bname%5D)return%20routes%5Bname%5D;options%7C%7C(options=%7B%7D);if(%22/%22==name.charAt(0))%7Boptions.name=path;options.path=name%7Delse%7Boptions.name=name;options.path=path%7Dvar%20newRoute=new%20Route(options);routes%5BnewRoute.id%5D=newRoute;routes.push(newRoute);route.emit(%22define%22,newRoute);return%20newRoute%7Dexports.use=function(fn)%7Bmixins.push(fn);return%20exports%7D;exports.clear=function()%7Bmixins.length=0;exports.routes.length=0%7D;var%20mixins=%5B%5D;var%20routes=exports.routes=%5B%5D;Emitter(exports);function%20Route(options)%7Bcontext=this;this.id=this.name=options.name;this.path=options.path;this.method=options.method%7C%7C%22GET%22;this.regexp=pathToRegexp(options.path,this.keys=%5B%5D,options.sensitive,options.strict);this.formats=%7B%7D;this.params=%7B%7D;this.accepts=%5B%5D;this.middlewares=%5B%5D;this.actions=%7Benter:%5B%5D,exit:%5B%5D,request:%5B%5D,connect:%5B%5D,disconnect:%5B%5D%7D%7DEmitter(Route.prototype);Route.prototype.param=function(name,options)%7Boptions%7C%7C(options=%7B%7D);options.validators%7C%7C(options.validators=%7B%7D);this.params%5Bname%5D=context=options;return%20this%7D;Route.prototype.type=function(type)%7Bthis.method=type;return%20this%7D;Route.prototype.use=function(fn)%7Bthis.middlewares.push(fn);return%20this%7D;Route.prototype.accept=function()%7Bvar%20n=arguments.length,accepts=new%20Array(n);for(var%20i=0;i%3Cn;i++)this.accepts.push(arguments%5Bi%5D);return%20this%7D;Route.prototype.format=function(format,fn)%7Bif(%22function%22==typeof%20format)%7Bthis.formats%5B%22*%22%5D=format%7Delse%7Bthis.formats%5Bformat%5D=fn;this.accepts.push(format)%7Dreturn%20this%7D;Route.prototype.action=function(name)%7Bvar%20action=this.actions%5Bname%5D%7C%7C(this.actions%5Bname%5D=%5B%5D);for(var%20i=1,n=arguments.length;i%3Cn;i++)%7Baction.push(arguments%5Bi%5D)%7Dreturn%20this%7D;Route.prototype.self=function()%7Bcontext=this;return%20this%7D;Route.prototype.match=function(path,params)%7Bvar%20keys=this.keys,qsIndex=path.indexOf(%22?%22),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp%20instanceof%20RegExp?this.regexp.exec(pathname):new%20RegExp(this.regexp).exec(pathname);if(!m)return%20false;for(var%20i=1,len=m.length;i%3Clen;++i)%7Bvar%20key=keys%5Bi-1%5D;var%20val=%22string%22==typeof%20m%5Bi%5D?decodeURIComponent(m%5Bi%5D):m%5Bi%5D;if(key)%7Bparams%5Bkey.name%5D=undefined!==params%5Bkey.name%5D?params%5Bkey.name%5D:val%7Delse%7Bparams.push(val)%7D%7Dreturn%20true%7D;Route.prototype.handle=function(context,next)%7Bif(!this.match(context.path,context.params))return%20next();this.parseParams(context);context.event%7C%7C(context.event=%22request%22);context.route=this;var%20self=this;try%7Bseries(self,self.middlewares,context,function()%7Bseries(self,self.actions%5B%22enter%22%5D,context,function()%7Bseries(self,self.actions%5Bcontext.event%5D,context,function()%7Bseries(self,self.formats%5B%22*%22%5D?%5Bself.formats%5B%22*%22%5D%5D:%5B%5D,context,next)%7D)%7D)%7D)%7Dcatch(e)%7Bthrow%20e;context.error=e;series(self,self.actions%5B%22500%22%5D,context,function()%7B%7D)%7Dreturn%20true%7D;Route.prototype.on=Route.prototype.action;Route.prototype.parseParams=function(ctx)%7Bfor(var%20key%20in%20this.params)%7Bif(ctx.params.hasOwnProperty(key))%7Bctx.params%5Bkey%5D=parseInt(ctx.params%5Bkey%5D)%7D%7D%7D;Route.prototype.render=function(name)%7Bthis.format(%22html%22,function(context)%7Bview.context=context;view.render(name)%7D);this.on(%22request%22,function(context)%7Bcontext.render()%7D)%7D;function%20series(self,callbacks,context,done)%7Bif(!callbacks.length)return%20done();var%20i=0,fn;function%20next(err)%7Bif(err%7C%7Ccontext.isCancelled%7C%7Ccontext.errors)%7Bdone(err%7C%7Ccontext.errors);return%7Dif(fn=callbacks%5Bi++%5D)%7Bif(2==fn.length)%7Bfn.call(self,context,next)%7Delse%7Bfn.call(self,context);next()%7D%7Delse%7Bdone()%7D%7Dnext()%7Droute.on(%22define%22,function(_route)%7Bfor(var%20i=0,n=mixins.length;i%3Cn;i++)%7Bmixins%5Bi%5D(_route)%7D%7D);%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-route/index.js");
require.package("part-async-series", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {module.exports=function(fns,val,done)%7Bvar%20i=0,fn;function%20handle(err)%7Bif(err)return%20done(err);next()%7Dfunction%20next()%7Bfn=fns%5Bi++%5D;if(!fn)%7Bif(done)done();return%7Dif(2==fn.length)%7Bfn(val,handle)%7Delse%7Bif(false===fn(val))done(new%20Error(%22haulted%22));else%20next()%7D%7Dnext()%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=part-async-series/index.js");
require.package("tower-router", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20route=require(%22tower-route%22),series=require(%22part-async-series%22);exports=module.exports=router;exports.route=route;exports.Context=Context;var%20callbacks=exports.callbacks=%5B%5D;var%20dispatch=true;var%20running=false;var%20modern=!!(history&&history.pushState);var%20onchange;var%20event=modern?%22onpopstate%22:%22hashchange%22;function%20router(context,next)%7Bexports.dispatch(context,next)%7Dexports.dispatch=function(context,fn)%7Bif(%22string%22===typeof%20context)context=new%20Context(%7Bpath:context%7D);series(callbacks,context,function(err)%7Bif(err&&fn)fn(err)%7D);return%20exports%7D;exports.clear=function()%7Bcallbacks.length=0;route.routes.length=0;return%20exports%7D;route.on(%22define%22,function(_route)%7Bcallbacks.push(function(context,next)%7Breturn%20_route.handle(context,next)%7D)%7D);exports.start=function(d)%7Bif(running)return;running=true;dispatch=false!==d;window.addEventListener(event,onchange);exports.replace(location.pathname+location.search)%7D;exports.stop=function()%7Brunning=false;window.removeEventListener(event,onchange)%7D;exports.show=function(path,state,dispatch)%7Bvar%20context=new%20Context(%7Bpath:path,state:state%7D);if(false!==dispatch)exports.dispatch(context);if(!context.unhandled)context.pushState();return%20context%7D;exports.replace=function(path,state,dispatch)%7Bvar%20context=new%20Context(%7Bpath:path,state:state%7D);if(null==dispatch)dispatch=true;if(dispatch)exports.dispatch(context);context.save();return%20context%7D;function%20Context(options)%7Boptions%7C%7C(options=%7B%7D);for(var%20key%20in%20options)this%5Bkey%5D=options%5Bkey%5D;var%20path=options.path;var%20i=path.indexOf(%22?%22);this.canonicalPath=path;this.path=path%7C%7C%22/%22;this.state=%7B%7D;this.state.path=path;this.querystring=~i?path.slice(i+1):%22%22;this.pathname=~i?path.slice(0,i):path;this.params=%5B%5D;this.title=document.title;this.state=options.state%7C%7C%7B%7D%7DContext.prototype.render=function(name,options)%7Bif(%22object%22==typeof%20name)options=name;options%7C%7C(options=%7B%7D);view(name).appendTo(%22body%22)%7D;Context.prototype.save=function()%7Bthis.replaceState()%7D;Context.prototype.redirect=function(path)%7Bexports.replace(path);return%20this%7D;Context.prototype.transition=function(name)%7Bseries(this.route.actions%5B%22exit%22%5D,this,function()%7Bexports.dispatch(route(name))%7D)%7D;if(modern)%7BContext.prototype.pushState=function()%7Bhistory.pushState(this.state,this.title,this.canonicalPath)%7D;Context.prototype.replaceState=function()%7Bhistory.replaceState(this.state,this.title,this.canonicalPath)%7D;onchange=function%20onpopstate(e)%7Bif(e.state)exports.replace(e.state.path,e.state)%7D%7Delse%7BContext.prototype.replaceState=Context.prototype.pushState=function()%7Bwindow.location.hash=%22#%22+this.canonicalPath;document.title=this.title%7D;onchange=function%20onhashchange(e)%7Bexports.replace(e.oldURL.split(%22#%22)%5B1%5D);return%20false%7D%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-client-router/index.js");
require.package("tower-model", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20proto=require(%22./lib/proto%22),statics=require(%22./lib/static%22),Emitter=require(%22tower-emitter%22);exports=module.exports=model;function%20model(name)%7Bif(constructors%5Bname%5D)return%20constructors%5Bname%5D;function%20Model(attrs)%7Battrs%7C%7C(attrs=%7B%7D);this.attrs=attrs;this.dirty=attrs;this._callbacks=%7B%7D;Model.emit(%22init%22,this)%7DModel.toString=function%20toString()%7Breturn'model(%22'+name+'%22)'%7D;Model.className=name;Model.attrs=%5B%5D;Model.validators=%5B%5D;Model.prototypes=%5B%5D;Model.relations=%5B%5D;Model._callbacks=%7B%7D;for(var%20key%20in%20statics)Model%5Bkey%5D=statics%5Bkey%5D;Model.prototype=%7B%7D;Model.prototype.constructor=Model;for(var%20key%20in%20proto)Model.prototype%5Bkey%5D=proto%5Bkey%5D;constructors%5Bname%5D=Model;constructors.push(Model);model.emit(%22define%22,Model);return%20Model%7Dvar%20constructors=exports.constructors=%5B%5D;exports.use=function(obj)%7Bif(%22function%22===typeof%20obj)%7Bobj.call(exports,statics,proto,exports)%7Delse%7Bfor(var%20key%20in%20obj)statics%5Bkey%5D=obj%5Bkey%5D%7D%7D;Emitter(model);Emitter(statics);Emitter(proto);exports.clear=function()%7Bconstructors.forEach(function(emitter)%7Bemitter.off(%22define%22);delete%20constructors%5Bemitter.className%5D%7D);constructors.length=0;return%20exports%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-model/index.js");
require.module("lib/static.js", "return function(exports, require, module, __filename, __dirname) {var%20noop=function()%7B%7D,context=%7B%7D,slice=%5B%5D.slice,query=require(%22tower-query%22),stream=require(%22tower-stream%22);exports.validate=function(fn)%7Bthis.validators.push(fn);return%20this%7D;exports.use=function(fn)%7Bfn(this);return%20this%7D;exports.load=function(data)%7B%7D;exports.action=function(name,options)%7Bstream(this.className+%22.%22+name,options);return%20this%7D;exports.id=function(name,options)%7Boptions%7C%7C(options=%7B%7D);options.primary=true;return%20this.attr(name,options)%7D;exports.attr=function(name,options)%7Boptions%7C%7C(options=%7B%7D);options.type%7C%7C(options.type=%22string%22);options.name=name;this.attrs.push(options);this.attrs%5Boptions.name%5D=options;if(%22_id%22===name%7C%7C%22id%22===name)%7Boptions.primaryKey=true;this.primaryKey=name%7Dthis.prototype%5Bname%5D=function(val)%7Bif(0===arguments.length)%7Bif(undefined===this.attrs%5Bname%5D&&options.defaultValue)return%20this.attrs%5Bname%5D=options.defaultValue();else%20return%20this.attrs%5Bname%5D%7Dvar%20prev=this.attrs%5Bname%5D;this.dirty%5Bname%5D=val;this.attrs%5Bname%5D=val;this.constructor.emit(%22change%20%22+name,this,val,prev);this.emit(%22change%20%22+name,val,prev);return%20this%7D;return%20this%7D;exports.val=function(value)%7Bif(isArray(value))%7Bcontext.field.defaultValue=function()%7Breturn%20value.concat()%7D%7Delse%7Bcontext.field.defaultValue=function()%7Breturn%20value%7D%7Dreturn%20this%7D;exports.create=function(attrs)%7Breturn%20new%20this(attrs)%7D;exports.save=function(attrs,fn)%7Bif(%22function%22===typeof%20attrs)%7Bfn=attrs;attrs=undefined%7Dreturn%20this.create(attrs).save(fn)%7D;exports.insert=exports.save;exports.query=function(fn)%7Bif(%22string%22===typeof%20fn)%7Breturn%20query(this.className+%22.%22+fn).start(this.className)%7Delse%7Breturn%20query().start(this.className).action(%22query%22).execute(fn)%7D%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-model/lib/static.js");
require.module("lib/proto.js", "return function(exports, require, module, __filename, __dirname) {var%20query=require(%22tower-query%22),each=require(%22part-async-series%22);exports.isNew=function()%7Bvar%20key=this.model.primaryKey;return!this.has(key)%7D;exports.save=function(fn)%7Bvar%20self=this;this.constructor.emit(%22saving%22,this);this.emit(%22saving%22);this.validate(function(err)%7Bif(err)%7Bfn(err)%7Delse%7Bquery().start(self.constructor.className).action(%22save%22,%5Bself%5D).execute(function()%7Bself.dirty=%7B%7D;self.constructor.emit(%22save%22,self);self.emit(%22save%22);if(fn)fn()%7D)%7D%7D)%7D;exports.update=function(fn)%7Breturn%20query.action(%22update%22,this).execute(fn)%7D;exports.remove=function(fn)%7Breturn%20query().action(%22remove%22,this).execute(fn)%7D;exports.isValid=function(fn)%7Bthis.validate(fn);return%200===this.errors.length%7D;exports.validate=function(done)%7Bvar%20self=this;this.errors=%5B%5D;this.emit(%22validating%22,this);each(this.constructor.validators,this,function()%7Bself.emit(%22validate%22,self);if(self.errors.length)done(new%20Error(%22Validation%20Error%22));else%20done()%7D)%7D;exports.set=function()%7Bif(%22string%22===typeof%20attrs)return%20this%5Barguments%5B0%5D%5D(arguments%5B1%5D);for(var%20key%20in%20attrs)%7Bthis%5Bkey%5D(attrs%5Bkey%5D)%7Dreturn%20this%7D;exports.get=function(attr)%7Breturn%20this.attrs%5Battr%5D%7D;exports.has=function(attr)%7Breturn%20null!=this.attrs%5Battr%5D%7D;exports.toJSON=function()%7Breturn%20this.attrs%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-model/lib/proto.js");
require.package("indexof", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20indexOf=%5B%5D.indexOf;module.exports=function(arr,obj)%7Bif(indexOf)return%20arr.indexOf(obj);for(var%20i=0;i%3Carr.length;++i)%7Bif(arr%5Bi%5D===obj)return%20i%7Dreturn-1%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-indexof/index.js");
require.package("tower-emitter", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20index=require(%22indexof%22),slice=%5B%5D.slice;module.exports=Emitter;function%20Emitter(obj)%7Bif(obj)return%20mixin(obj)%7Dfunction%20mixin(obj)%7Bfor(var%20key%20in%20Emitter.prototype)%7Bobj%5Bkey%5D=Emitter.prototype%5Bkey%5D%7Dreturn%20obj%7DEmitter.prototype.on=function(event,fn)%7Bthis._callbacks%7C%7C(this._callbacks=%7B%7D);(this._callbacks%5Bevent%5D%7C%7C(this._callbacks%5Bevent%5D=%5B%5D)).push(fn);return%20this%7D;Emitter.prototype.once=function(event,fn)%7Bvar%20self=this;this._callbacks%7C%7C(this._callbacks=%7B%7D);function%20on()%7Bself.off(event,on);fn.apply(this,arguments)%7Dfn._off=on;this.on(event,on);return%20this%7D;Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=function(event,fn)%7Bif(!this._callbacks)return%20this;if(0===arguments.length)%7Bthis._callbacks=%7B%7D;return%20this%7Dvar%20callbacks=this._callbacks%5Bevent%5D;if(!callbacks)return%20this;if(1===arguments.length)%7Bdelete%20this._callbacks%5Bevent%5D;return%20this%7Dvar%20i=index(callbacks,fn._off%7C%7Cfn);if(~i)callbacks.splice(i,1);return%20this%7D;Emitter.prototype.emit=function(event)%7Bif(!this._callbacks)return%20this;this._callbacks%7C%7Cthis._callbacks%7C%7C%7B%7D;var%20callbacks=this._callbacks%5Bevent%5D;if(callbacks)%7Bvar%20args=slice.call(arguments,1);callbacks=callbacks.slice(0);for(var%20i=0,n=callbacks.length;i%3Cn;++i)%7Bcallbacks%5Bi%5D.apply(this,args)%7D%7Dreturn%20this%7D;Emitter.prototype.listeners=function(event)%7Bthis._callbacks%7C%7C(this._callbacks=%7B%7D);return%20this._callbacks%5Bevent%5D%7C%7C%5B%5D%7D;Emitter.prototype.hasListeners=function(event)%7Breturn!!this.listeners(event).length%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-emitter/index.js");
require.package("tower-stream", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20proto=require(%22./lib/proto%22),statics=require(%22./lib/static%22),Emitter=require(%22tower-emitter%22);exports=module.exports=stream;function%20stream(name,fn)%7Bif(lookup%5Bname%5D)return%20lookup%5Bname%5D;function%20Stream(options)%7Boptions%7C%7C(options=%7B%7D);for(key%20in%20options)this%5Bkey%5D=options%5Bkey%5D;this.name=name;this.inputs=options.inputs%7C%7C%5B%5D;this.outputs=options.outputs%7C%7C%5B%5D;Stream.emit(%22init%22,this)%7DStream.className=Stream.id=name;for(var%20key%20in%20statics)Stream%5Bkey%5D=statics%5Bkey%5D;Stream.prototype=%7B%7D;Stream.prototype.constructor=Stream;for(var%20key%20in%20proto)Stream.prototype%5Bkey%5D=proto%5Bkey%5D;lookup%5Bname%5D=Stream;constructors.push(Stream);stream.emit(%22define%22,Stream);return%20Stream%7Dvar%20constructors=stream.constructors=%5B%5D,lookup=%7B%7D;Emitter(stream);Emitter(statics);Emitter(proto);exports.clear=function()%7Bexports.off(%22define%22);while(constructors.length)exports.remove(constructors.pop());return%20exports%7D;exports.remove=function(val)%7Bvar%20emitter=lookup%5Bval%5D%7C%7Cval;emitter.off(%22init%22);emitter.off(%22data%22);emitter.off(%22exec%22);emitter.off(%22close%22);delete%20lookup%5Bemitter.id%5D%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-stream/index.js");
require.module("lib/static.js", "return function(exports, require, module, __filename, __dirname) {exports.create=function(options)%7Breturn%20new%20this(options)%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-stream/lib/static.js");
require.module("lib/proto.js", "return function(exports, require, module, __filename, __dirname) {var%20noop=function()%7B%7D;exports.exec=function(data,fn)%7Bthis.constructor.emit(%22exec%22,this,data,fn%7C%7Cnoop)%7D;exports.open=function(data,fn)%7Bif(this.constructor.hasListeners(%22open%22))this.constructor.emit(%22open%22,this,data,fn%7C%7Cnoop);if(this.hasListeners(%22open%22))this.emit(%22open%22,fn%7C%7Cnoop);if(!this.hasListeners(%22open%22)&&!this.constructor.hasListeners(%22open%22))fn()%7D;exports.close=function(fn)%7Bthis.constructor.emit(%22close%22,this,fn);this.emit(%22close%22,fn)%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-stream/lib/proto.js");
require.package("part-each-array", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20nativeForEach=%5B%5D.forEach;module.exports=each;function%20each(array,iterator,context)%7Bif(null==array)return;if(nativeForEach&&array.forEach===nativeForEach)%7Barray.forEach(iterator,context)%7Delse%7Bfor(var%20i=0,n=array.length;i%3Cl;i++)%7Bif(false===iterator.call(context,array%5Bi%5D,i,array))return%7D%7D%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=part-each-array/index.js");
require.package("tower-query", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20Topology=require(%22tower-topology%22).Topology,adapter=require(%22tower-adapter%22),each=require(%22part-each-array%22),slice=%5B%5D.slice,context,start;exports=module.exports=query;exports.Query=Query;function%20query(name)%7Breturn%20null==name?new%20Query:queries%5Bname%5D%7C%7C(queries%5Bname%5D=new%20Query(name))%7Dvar%20queries=exports.queries=%7B%7D;query.key=function(val)%7Bvar%20variable=%7B%7D;val=val.split(%22.%22);switch(val.length)%7Bcase%203:variable.adapter=val%5B0%5D;variable.model=val%5B1%5D;variable.attr=val%5B2%5D;break;case%202:variable.model=val%5B0%5D;variable.attr=val%5B1%5D;break;case%201:variable.model=start;variable.attr=val%5B0%5D;break%7Dreturn%20variable%7D;function%20Query(name)%7Bthis.name=name;this.criteria=%5B%5D%7DQuery.prototype.start=function(key,val)%7Bstart=key;return%20this.push(%22start%22,key)%7D;Query.prototype.where=function(key)%7Bcontext=key;return%20this%7D;Query.prototype.incoming=function(key)%7Breturn%20this.relation(%22incoming%22,key)%7D;Query.prototype.outgoing=function(key)%7Breturn%20this.relation(%22outgoing%22,key)%7D;Query.prototype.as=function(key)%7Breturn%20this.push(%22as%22,key)%7D;each(%5B%22eq%22,%22neq%22,%22gte%22,%22gt%22,%22lte%22,%22lt%22,%22in%22,%22nin%22,%22match%22%5D,function(operator)%7BQuery.prototype%5Boperator%5D=function(val)%7Breturn%20this.constraint(context,operator,val)%7D%7D);each(%5B%22query%22,%22find%22,%22remove%22,%22pipe%22,%22stream%22,%22count%22,%22exists%22%5D,function(action)%7BQuery.prototype%5Baction%5D=function(fn)%7Breturn%20this.action(action).execute(fn)%7D%7D);Query.prototype.create=function(data,fn)%7Breturn%20this.action(%22create%22,data).execute(fn)%7D;Query.prototype.update=function(data,fn)%7Breturn%20this.action(%22update%22,data).execute(fn)%7D;Query.prototype.validate=function(fn)%7Breturn%20this.push(%22validate%22,fn)%7D;Query.prototype.asc=function(key)%7Breturn%20this.order(1,key)%7D;Query.prototype.desc=function(key)%7Breturn%20this.order(-1,key)%7D;Query.prototype.returns=function(key)%7Breturn%20this.push(%22return%22,key)%7D;Query.prototype.select=function(key)%7Bstart=start%7C%7Ckey;return%20this.push(%22select%22,key)%7D;Query.prototype.relation=function(type,key)%7Breturn%20this.push(%22relation%22,type,key)%7D;Query.prototype.constraint=function(key,op,val)%7Breturn%20this.push(%22constraint%22,query.key(key),op,val)%7D;Query.prototype.action=function(type,data)%7Breturn%20this.push(%22action%22,type,data)%7D;Query.prototype.order=function(dir,key)%7Breturn%20this.push(%22order%22,dir,key)%7D;Query.prototype.push=function()%7Bthis.criteria.push(slice.call(arguments));return%20this%7D;Query.prototype.size=function()%7Breturn%20this.criteria.length%7D;Query.prototype.reset=function()%7Bthis.criteria=%5B%5D;return%20this%7D;Query.prototype.exec=function(fn)%7Bcontext=start=undefined;if(!this._adapter)this._adapter=%22memory%22;return%20adapter(this._adapter).execute(this.criteria,fn)%7D;Query.prototype.execute=Query.prototype.exec;Query.prototype.use=function(name)%7Bthis._adapter=name;return%20this%7D;Query.prototype.topology=function()%7Breturn%20queryToTopology(this)%7D;Query.prototype.explain=function(fn)%7Bthis._explain=fn;return%20this%7D;function%20queryToTopology(q)%7Bvar%20topology=new%20Topology,criteria=q.criteria,name;for(var%20i=0,n=criteria.length;i%3Cn;i++)%7Bvar%20criterion=criteria%5Bi%5D;switch(criterion%5B0%5D)%7Bcase%22select%22:case%22start%22:topology.stream(name=criterion%5B1%5D+%22.find%22,%7Bconstraints:%5B%5D%7D);break;case%22constraint%22:topology.streams%5Bname%5D.constraints.push(criterion);break%7D%7Dreturn%20topology%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-query/index.js");
require.package("tower-topology", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20stream=require(%22tower-stream%22),proto=require(%22./lib/proto%22),statics=require(%22./lib/static%22),Emitter=require(%22tower-emitter%22);exports=module.exports=topology;exports.stream=stream;function%20topology(name)%7Bif(lookup%5Bname%5D)return%20lookup%5Bname%5D;function%20Topology()%7Bthis.name=name;this.streams=%5B%5D;Topology.streams.forEach(function(_stream)%7Bthis.stream(_stream.name,_stream)%7D,this);this.emit(%22init%22,this)%7DTopology.toString=function%20toString()%7Breturn'topology(%22'+name+'%22)'%7D;Topology.className=Topology.id=name;Topology.streams=%5B%5D;for(var%20key%20in%20statics)Topology%5Bkey%5D=statics%5Bkey%5D;Topology.prototype=%7B%7D;Topology.prototype.constructor=Topology;for(var%20key%20in%20proto)Topology.prototype%5Bkey%5D=proto%5Bkey%5D;lookup%5Bname%5D=Topology;constructors.push(Topology);topology.emit(%22define%22,Topology);return%20Topology%7Dvar%20constructors=topology.constructors=%5B%5D,lookup=%7B%7D;Emitter(topology);Emitter(statics);Emitter(proto);exports.clear=function()%7Bexports.off(%22define%22);constructors.forEach(function(emitter)%7Bemitter.off(%22init%22);emitter.off(%22data%22);emitter.off(%22exec%22);emitter.off(%22close%22);delete%20lookup%5Bemitter.id%5D%7D);constructors.length=0;return%20exports%7D;exports.Topology=topology(%22default%22);%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-topology/index.js");
require.module("lib/static.js", "return function(exports, require, module, __filename, __dirname) {var%20context;exports.stream=function(key)%7Bif(!this.streams%5Bkey%5D)%7Bthis.streams.push(this.streams%5Bkey%5D=%7Bname:key,inputs:%5B%5D,outputs:%5B%5D%7D)%7Dcontext=this.streams%5Bkey%5D;return%20this%7D;exports.input=function(key)%7Bcontext.inputs.push(%7Bname:key%7D);this.streams%5Bkey%5D.outputs.push(context.name);return%20this%7D;exports.create=function()%7Breturn%20new%20this%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-topology/lib/static.js");
require.module("lib/proto.js", "return function(exports, require, module, __filename, __dirname) {var%20stream=require(%22tower-stream%22),series=require(%22part-async-series%22);exports.stream=function(obj,options)%7Bif(%22string%22==typeof%20obj)obj=this.streams%5Bobj%5D=stream(obj).create(options);else%20this.streams%5Bobj.name%5D=obj;this.streams.push(obj);return%20this%7D;exports.exec=function(done)%7Bvar%20streams=this.streams,self=this,closed=%7B%7D;function%20build(node)%7Bif(node.outputs.length)%7Bvar%20fns=%5B%5D;node.outputs.forEach(function(next)%7Bfns.push(function(data,fn)%7Bstreams%5Bnext%5D.exec(data,fn)%7D)%7D);fns.push(function(data,fn)%7Bnode.exec(data,fn)%7D);node.on(%22data%22,function(data)%7Bseries(fns,data)%7D);node.on(%22close%22,function()%7Bclosed%5Bnode.name%5D=true;node.outputs.forEach(function(next)%7Bvar%20allComplete=true;streams%5Bnext%5D.inputs.forEach(function(input)%7Bif(!closed%5Binput.name%5D)%7BallComplete=false;return%20false%7D%7D);if(allComplete)streams%5Bnext%5D.close()%7D)%7D)%7Delse%7Bnode.on(%22data%22,function(data)%7Bself.emit(%22data%22,data)%7D);node.on(%22close%22,function()%7Bself.emit(%22close%22)%7D)%7D%7Dstreams.forEach(build);var%20open=%5B%5D;streams.forEach(function(node)%7Bopen.push(function(data,fn)%7Bnode.open(data,fn)%7D)%7D);open.push(function()%7Bstreams.forEach(function(_stream)%7Bif(!_stream.inputs.length)streams%5B_stream.name%5D.exec()%7D)%7D);series(open,undefined,done);return%20this%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-topology/lib/proto.js");
require.package("tower-adapter", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20Emitter=require(%22tower-emitter%22),stream=require(%22tower-stream%22),_model,context,type,setting,attr,database,model,_stream,index;var%20exports=module.exports=adapter;exports.Adapter=Adapter;function%20adapter(name)%7Breturn%20adapters%5Bname%5D%7C%7C(adapters%5Bname%5D=new%20Adapter(name))%7Dexports.exists=function(name)%7Breturn!!adapters%5Bname%5D%7D;var%20adapters=adapter.instances=%7B%7D;function%20Adapter(name)%7Bthis.name=name;this.context=this;this.databases=%7B%7D;this.types=%7B%7D;this.settings=%7B%7D;this.models=%7B%7D;this.connections=%7B%7D;this.model=this.model.bind(this);this.action=this.action.bind(this)%7DAdapter.prototype.connection=function(name,options)%7Bif(1==arguments.length&&%22string%22==typeof%20name)%7Bsetting=context=settings%5Bname%5D;return%20this%7Dif(%22object%22==typeof%20name)options=name;options%7C%7C(options=%7B%7D);options.name%7C%7C(options.name=name);setting=context=settings%5Boptions.name%5D=options;return%20this%7D;Adapter.prototype.type=function(name,to,from)%7Btype=context=this.types%5Bname%5D=this.types%5Bname%5D%7C%7C%7Bdeserialize:to,serialize:from%7D;return%20this%7D;Adapter.prototype.database=function(name)%7Bdatabase=context=this.databases%5Bname%5D=this.databases%5Bname%5D%7C%7C%7Bname:name%7D;return%20this%7D;Adapter.prototype.model=function(name,options)%7Bmodel=context=this.models%5Bname%5D=this.models%5Bname%5D%7C%7C%7Bname:name,database:database%7D;if(options)%7Bfor(var%20key%20in%20options)model%5Bkey%5D=options%5Bkey%5D%7Dreturn%20exports.model(this.name+%22.%22+name)%7D;Adapter.prototype.action=function(name)%7Breturn%20stream(this.name+%22.%22+model.name+%22.%22+name)%7D;Adapter.prototype.attr=function(name,options)%7Battr=context=context%5Bname%5D=context%5Bname%5D%7C%7C%7Bname:name%7D;return%20this%7D;Adapter.prototype.serialize=function(fn)%7Bif(1==arguments.length)%7Bcontext.serialize=fn;return%20this%7Dreturn%20this.types%5Barguments%5B0%5D%5D.serialize(arguments%5B1%5D)%7D;Adapter.prototype.deserialize=function(fn)%7Bif(1==arguments.length)%7Bcontext.deserialize=fn;return%20this%7Dreturn%20this.types%5Barguments%5B0%5D%5D.deserialize(arguments%5B1%5D)%7D;Adapter.prototype.execute=function()%7Bthrow%20new%20Error(%22Adapter#execute%20not%20implemented.%22)%7D;Adapter.prototype.self=function()%7Bmodel=type=setting=attr=undefined;return%20context=this%7D;Adapter.prototype.on=function(name,fn)%7Bif(_stream===context)%7B_stream.on.apply(_stream,arguments)%7Dreturn%20this%7D;Adapter.prototype.find=Adapter.prototype.execute;Adapter.prototype.create=Adapter.prototype.execute;Adapter.prototype.update=Adapter.prototype.execute;Adapter.prototype.remove=Adapter.prototype.execute;Adapter.prototype.keystore=Adapter.prototype.database;Adapter.prototype.table=Adapter.prototype.columnFamily=Adapter.prototype.collection=Adapter.prototype.model;Adapter.prototype.to=Adapter.prototype.deserialize;Adapter.prototype.from=Adapter.prototype.serialize;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-adapter/index.js");
require.package("format-parser", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {module.exports=function(str)%7Breturn%20str.split(/%20*%5C%7C%20*/).map(function(call)%7Bvar%20parts=call.split(%22:%22);var%20name=parts.shift();var%20args=parseArgs(parts.join(%22:%22));return%7Bname:name,args:args%7D%7D)%7D;function%20parseArgs(str)%7Bvar%20args=%5B%5D;var%20re=/%22(%5B%5E%22%5D*)%22%7C'(%5B%5E'%5D*)'%7C(%5B%5E%20%5Ct,%5D+)/g;var%20m;while(m=re.exec(str))%7Bargs.push(m%5B2%5D%7C%7Cm%5B1%5D%7C%7Cm%5B0%5D)%7Dreturn%20args%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-format-parser/index.js");
require.package("debug", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {if(%22undefined%22==typeof%20window)%7Bmodule.exports=require(%22./lib/debug%22)%7Delse%7Bmodule.exports=require(%22./debug%22)%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=visionmedia-debug/index.js");
require.module("debug.js", "return function(exports, require, module, __filename, __dirname) {module.exports=debug;function%20debug(name)%7Bif(!debug.enabled(name))return%20function()%7B%7D;return%20function(fmt)%7Bfmt=coerce(fmt);var%20curr=new%20Date;var%20ms=curr-(debug%5Bname%5D%7C%7Ccurr);debug%5Bname%5D=curr;fmt=name+%22%20%22+fmt+%22%20+%22+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)%7D%7Ddebug.names=%5B%5D;debug.skips=%5B%5D;debug.enable=function(name)%7Btry%7BlocalStorage.debug=name%7Dcatch(e)%7B%7Dvar%20split=(name%7C%7C%22%22).split(/%5B%5Cs,%5D+/),len=split.length;for(var%20i=0;i%3Clen;i++)%7Bname=split%5Bi%5D.replace(%22*%22,%22.*?%22);if(name%5B0%5D===%22-%22)%7Bdebug.skips.push(new%20RegExp(%22%5E%22+name.substr(1)+%22$%22))%7Delse%7Bdebug.names.push(new%20RegExp(%22%5E%22+name+%22$%22))%7D%7D%7D;debug.disable=function()%7Bdebug.enable(%22%22)%7D;debug.humanize=function(ms)%7Bvar%20sec=1e3,min=60*1e3,hour=60*min;if(ms%3E=hour)return(ms/hour).toFixed(1)+%22h%22;if(ms%3E=min)return(ms/min).toFixed(1)+%22m%22;if(ms%3E=sec)return(ms/sec%7C0)+%22s%22;return%20ms+%22ms%22%7D;debug.enabled=function(name)%7Bfor(var%20i=0,len=debug.skips.length;i%3Clen;i++)%7Bif(debug.skips%5Bi%5D.test(name))%7Breturn%20false%7D%7Dfor(var%20i=0,len=debug.names.length;i%3Clen;i++)%7Bif(debug.names%5Bi%5D.test(name))%7Breturn%20true%7D%7Dreturn%20false%7D;function%20coerce(val)%7Bif(val%20instanceof%20Error)return%20val.stack%7C%7Cval.message;return%20val%7Dif(window.localStorage)debug.enable(localStorage.debug);%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=visionmedia-debug/debug.js");
require.package("event", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {exports.bind=function(el,type,fn,capture)%7Bif(el.addEventListener)%7Bel.addEventListener(type,fn,capture%7C%7Cfalse)%7Delse%7Bel.attachEvent(%22on%22+type,fn)%7Dreturn%20fn%7D;exports.unbind=function(el,type,fn,capture)%7Bif(el.removeEventListener)%7Bel.removeEventListener(type,fn,capture%7C%7Cfalse)%7Delse%7Bel.detachEvent(%22on%22+type,fn)%7Dreturn%20fn%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-event/index.js");
require.package("classes", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20index=require(%22indexof%22);var%20re=/%5Cs+/;var%20toString=Object.prototype.toString;module.exports=function(el)%7Breturn%20new%20ClassList(el)%7D;function%20ClassList(el)%7Bthis.el=el;this.list=el.classList%7DClassList.prototype.add=function(name)%7Bif(this.list)%7Bthis.list.add(name);return%20this%7Dvar%20arr=this.array();var%20i=index(arr,name);if(!~i)arr.push(name);this.el.className=arr.join(%22%20%22);return%20this%7D;ClassList.prototype.remove=function(name)%7Bif(%22%5Bobject%20RegExp%5D%22==toString.call(name))%7Breturn%20this.removeMatching(name)%7Dif(this.list)%7Bthis.list.remove(name);return%20this%7Dvar%20arr=this.array();var%20i=index(arr,name);if(~i)arr.splice(i,1);this.el.className=arr.join(%22%20%22);return%20this%7D;ClassList.prototype.removeMatching=function(re)%7Bvar%20arr=this.array();for(var%20i=0;i%3Carr.length;i++)%7Bif(re.test(arr%5Bi%5D))%7Bthis.remove(arr%5Bi%5D)%7D%7Dreturn%20this%7D;ClassList.prototype.toggle=function(name)%7Bif(this.list)%7Bthis.list.toggle(name);return%20this%7Dif(this.has(name))%7Bthis.remove(name)%7Delse%7Bthis.add(name)%7Dreturn%20this%7D;ClassList.prototype.array=function()%7Bvar%20arr=this.el.className.split(re);if(%22%22===arr%5B0%5D)arr.pop();return%20arr%7D;ClassList.prototype.has=ClassList.prototype.contains=function(name)%7Breturn%20this.list?this.list.contains(name):!!~index(this.array(),name)%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-classes/index.js");
require.package("query", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {function%20one(selector,el)%7Breturn%20el.querySelector(selector)%7Dexports=module.exports=function(selector,el)%7Bel=el%7C%7Cdocument;return%20one(selector,el)%7D;exports.all=function(selector,el)%7Bel=el%7C%7Cdocument;return%20el.querySelectorAll(selector)%7D;exports.engine=function(obj)%7Bif(!obj.one)throw%20new%20Error(%22.one%20callback%20required%22);if(!obj.all)throw%20new%20Error(%22.all%20callback%20required%22);one=obj.one;exports.all=obj.all%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-query/index.js");
require.package("reactive", "lib/index.js"); require.module("lib/index.js", "return function(exports, require, module, __filename, __dirname) {var%20debug=require(%22debug%22)(%22reactive%22),query=require(%22query%22),Binding=require(%22./binding%22),bindings=require(%22./bindings%22);exports=module.exports=Reactive;exports.bindings=%7B%7D;exports.subscribe=function(fn)%7BBinding.subscribe=fn%7D;exports.unsubscribe=function(fn)%7BBinding.unsubscribe=fn%7D;exports.bind=function(name,fn)%7Bif(%22object%22==typeof%20name)%7Bfor(var%20key%20in%20name)%7Bexports.bind(key,name%5Bkey%5D)%7Dreturn%7Dexports.bindings%5Bname%5D=fn%7D;function%20Reactive(el,obj,options)%7Bif(!(this%20instanceof%20Reactive))return%20new%20Reactive(el,obj,options);this.el=el;this.obj=obj;this.els=%5B%5D;this.fns=options%7C%7C%7B%7D;this.bindAll()%7DReactive.prototype.bindAll=function()%7Bfor(var%20name%20in%20exports.bindings)%7Bthis.bind(name,exports.bindings%5Bname%5D)%7D%7D;Reactive.prototype.bind=function(name,fn)%7Bif(%22object%22==typeof%20name)%7Bfor(var%20key%20in%20name)%7Bthis.bind(key,name%5Bkey%5D)%7Dreturn%7Dvar%20obj=this.obj;var%20els=query.all(%22%5B%22+name+%22%5D%22,this.el);if(!els.length)return;debug(%22bind%20%5B%25s%5D%20(%25d%20elements)%22,name,els.length);for(var%20i=0;i%3Cels.length;i++)%7Bvar%20binding=new%20Binding(name,this,els%5Bi%5D,fn);binding.bind()%7D%7D;bindings(exports.bind);%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-reactive/lib/index.js");
require.module("lib/binding.js", "return function(exports, require, module, __filename, __dirname) {var%20parse=require(%22format-parser%22);module.exports=Binding;function%20Binding(name,view,el,fn)%7Bthis.name=name;this.view=view;this.obj=view.obj;this.fns=view.fns;this.el=el;this.fn=fn%7DBinding.prototype.bind=function()%7Bvar%20val=this.el.getAttribute(this.name);this.fn(this.el,val,this.obj)%7D;Binding.prototype.interpolate=function(name)%7Bvar%20self=this;name=clean(name);if(~name.indexOf(%22%7B%22))%7Breturn%20name.replace(/%7B(%5B%5E%7D%5D+)%7D/g,function(_,name)%7Breturn%20self.value(name)%7D)%7Dreturn%20this.formatted(name)%7D;Binding.prototype.value=function(name)%7Bvar%20self=this;var%20obj=this.obj;var%20view=this.view.fns;name=clean(name);if(%22function%22==typeof%20view%5Bname%5D)%7Breturn%20view%5Bname%5D()%7Dif(view.hasOwnProperty(name))%7Breturn%20view%5Bname%5D%7Dif(%22function%22==typeof%20obj%5Bname%5D)%7Breturn%20obj%5Bname%5D()%7Dreturn%20obj%5Bname%5D%7D;Binding.prototype.formatted=function(fmt)%7Bvar%20calls=parse(clean(fmt));var%20name=calls%5B0%5D.name;var%20val=this.value(name);for(var%20i=1;i%3Ccalls.length;++i)%7Bvar%20call=calls%5Bi%5D;call.args.unshift(val);var%20fn=this.fns%5Bcall.name%5D;val=fn.apply(this.fns,call.args)%7Dreturn%20val%7D;Binding.prototype.subscribe=function(fn)%7Bthis._subscribe=fn%7D;Binding.prototype.unsubscribe=function(fn)%7Bthis._unsubscribe=fn%7D;Binding.prototype.change=function(fn)%7Bfn.call(this);var%20self=this;var%20obj=this.obj;var%20sub=this._subscribe%7C%7CBinding.subscribe;var%20val=this.el.getAttribute(this.name);var%20parts=val.split(%22%3C%22);val=parts%5B0%5D;var%20computed=parts%5B1%5D;if(computed)computed=computed.trim().split(/%5Cs+/);if(hasInterpolation(val))%7Bvar%20props=interpolationProps(val);props.forEach(function(prop)%7Bsub(obj,prop,fn.bind(self))%7D);return%7Dvar%20calls=parse(val);var%20prop=calls%5B0%5D.name;if(computed)%7Bcomputed.forEach(function(prop)%7Bsub(obj,prop,fn.bind(self))%7D);return%7Dsub(obj,prop,fn.bind(this))%7D;Binding.subscribe=function(obj,prop,fn)%7Bif(!obj.on)return;obj.on(%22change%20%22+prop,fn)%7D;Binding.unsubscribe=function(obj,prop,fn)%7Bif(!obj.off)return;obj.off(%22change%20%22+prop,fn)%7D;function%20interpolationProps(str)%7Bvar%20m;var%20arr=%5B%5D;var%20re=/%5C%7B(%5B%5E%7D%5D+)%5C%7D/g;while(m=re.exec(str))%7Barr.push(m%5B1%5D)%7Dreturn%20arr%7Dfunction%20hasInterpolation(str)%7Breturn~str.indexOf(%22%7B%22)%7Dfunction%20clean(str)%7Breturn%20str.split(%22%3C%22)%5B0%5D.trim()%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-reactive/lib/binding.js");
require.module("lib/bindings.js", "return function(exports, require, module, __filename, __dirname) {var%20event=require(%22event%22),classes=require(%22classes%22);var%20attrs=%5B%22id%22,%22src%22,%22rel%22,%22cols%22,%22rows%22,%22name%22,%22href%22,%22title%22,%22style%22,%22width%22,%22value%22,%22height%22,%22tabindex%22,%22placeholder%22%5D;var%20events=%5B%22change%22,%22click%22,%22mousedown%22,%22mouseup%22,%22blur%22,%22focus%22,%22input%22,%22keydown%22,%22keypress%22,%22keyup%22%5D;module.exports=function(bind)%7Battrs.forEach(function(attr)%7Bbind(%22data-%22+attr,function(el,name,obj)%7Bthis.change(function()%7Bel.setAttribute(attr,this.interpolate(name))%7D)%7D)%7D);bind(%22data-append%22,function(el,name)%7Bvar%20other=this.value(name);el.appendChild(other)%7D);bind(%22data-replace%22,function(el,name)%7Bvar%20other=this.value(name);el.parentNode.replaceChild(other,el)%7D);bind(%22data-show%22,function(el,name)%7Bthis.change(function()%7Bif(this.value(name))%7Bclasses(el).add(%22show%22).remove(%22hide%22)%7Delse%7Bclasses(el).remove(%22show%22).add(%22hide%22)%7D%7D)%7D);bind(%22data-hide%22,function(el,name)%7Bthis.change(function()%7Bif(this.value(name))%7Bclasses(el).remove(%22show%22).add(%22hide%22)%7Delse%7Bclasses(el).add(%22show%22).remove(%22hide%22)%7D%7D)%7D);bind(%22data-checked%22,function(el,name)%7Bthis.change(function()%7Bif(this.value(name))%7Bel.setAttribute(%22checked%22,%22checked%22)%7Delse%7Bel.removeAttribute(%22checked%22)%7D%7D)%7D);bind(%22data-text%22,function(el,name)%7Bthis.change(function()%7Bel.textContent=this.interpolate(name)%7D)%7D);bind(%22data-html%22,function(el,name)%7Bthis.change(function()%7Bel.innerHTML=this.formatted(name)%7D)%7D);events.forEach(function(name)%7Bbind(%22on-%22+name,function(el,method)%7Bvar%20fns=this.view.fns;event.bind(el,name,function(e)%7Bvar%20fn=fns%5Bmethod%5D;if(!fn)throw%20new%20Error(%22method%20.%22+method+%22()%20missing%22);fns%5Bmethod%5D(e)%7D)%7D)%7D)%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=component-reactive/lib/bindings.js");
require.package("tower-view", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20reactive=require(%22reactive%22),Emitter=require(%22tower-emitter%22);exports=module.exports=view;exports.contexts=%7B%7D;function%20context(name,parent)%7Bif(!name)throw%20new%20Error(%22You%20need%20to%20specify%20a%20name%20within%20a%20context.%22);if(exports.contexts%5Bname%5D)return%20exports.contexts%5Bname%5D;return%20exports.contexts%5Bname%5D=new%20Context(%7Bname:name,parent:parent%7D)%7Dfunction%20Context(options)%7Bthis.name=options.name;this.parent=context(options.parent);this.children=%7B%7D;this.scope=new%20Scope%7DContext.prototype.set=function()%7B%7D;Context.prototype.get=function()%7B%7D;function%20Scope()%7B%7Dexports.views=%7B%7D;function%20view(name)%7Bif(!name)throw%20new%20Error(%22Views%20need%20a%20name.%22);if(exports.views%5Bname%5D)return%20exports.views%5Bname%5D;var%20instance=new%20View(%7Bname:name,state:%22body%22===name?%22rendered%22:%22not%20rendered%22%7D);return%20exports.views%5Bname%5D=instance%7Dview.init=function()%7B$(document).find('script%5Btype=%22text/view%22%5D').each(function()%7Bvar%20elem=$(this),name=elem.attr(%22name%22);view(name)._state(%22not%20rendered%22);view(name).elem=elem%7D);$(document).find(%22%5Bview%5D%22).each(function()%7Bvar%20elem=$(this),name=elem.attr(%22view%22);view(name)._state(%22rendered%22);view(name).elem=elem%7D);var%20bodyView=view(%22body%22);function%20recurseViews(viewObj,parent)%7Bif(!parent)parent=viewObj;if(%22not%20rendered%22===viewObj.state)%7Bparent.elem.append(viewObj.elem)%7Dif(viewObj.hasChildren())%7Bfor(var%20key%20in%20viewObj.children)%7Bvar%20child=viewObj.children%5Bkey%5D;recurseViews(child,parent)%7D%7D%7DrecurseViews(bodyView)%7D;function%20View(options)%7Bthis.name=options.name;this.children=%5B%5D;this.state=options.state%7C%7C%22not%20rendered%22;this.elem=null;if(%22body%22===this.name)%7Bthis.elem=$(%22body%22)%7D%7DEmitter(View.prototype);View.prototype.child=function(name)%7Bif(this.children%5Bname%5D)return%20this;this.children.push(this.children%5Bname%5D=view(name));return%20this%7D;View.prototype.hasChildren=function()%7Breturn%20this.children.length%7D;View.prototype._state=function(state)%7Bthis.state=state;return%20this%7D;View.prototype.swap=function(from,to)%7Bthis.children%5Bfrom%5D=view(to);return%20this%7D;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-client-view/index.js");
require.package("tower-filter", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20validate=require(%22tower-validate%22);module.exports=filter;function%20filter(array,constraints)%7Bif(!constraints.length)return%20array;var%20result=%5B%5D;for(var%20i=0,n=array.length;i%3Cn;i++)%7Bif(validate(array%5Bi%5D,constraints))result.push(array%5Bi%5D)%7Dreturn%20result%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-filter/index.js");
require.package("part-is-string", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20toString=Object.prototype.toString;module.exports=isString;function%20isString(obj)%7Breturn%20toString.call(obj)==%22%5Bobject%20String%5D%22%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=part-is-string/index.js");
require.package("part-is-array", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {module.exports=Array.isArray%7C%7CisArray;function%20isArray(obj)%7Breturn%22%5Bobject%20Array%5D%22===toString.call(obj)%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=part-is-array/index.js");
require.package("tower-validate", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20isString=require(%22part-is-string%22),isArray=require(%22part-is-array%22),indexof=require(%22indexof%22);exports=module.exports=validate;exports.validator=validator;function%20validate(obj,constraints)%7Bfor(var%20i=0,n=constraints.length;i%3Cn;i++)%7Bif(!validator(constraints%5Bi%5D%5B1%5D)(obj,constraints%5Bi%5D%5B0%5D,constraints%5Bi%5D%5B2%5D))return%20false%7Dreturn%20true%7Dfunction%20validator(name,fn)%7Breturn%201===arguments.length?validator%5Bname%5D:validator%5Bname%5D=fn%7Dvalidator(%22eq%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D==val%7D);validator(%22neq%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D!=val%7D);validator(%22gte%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D%3E=val%7D);validator(%22gt%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D%3Eval%7D);validator(%22lte%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D%3C=val%7D);validator(%22lt%22,function(obj,key,val)%7Breturn%20obj%5Bkey%5D%3Cval%7D);validator(%22match%22,function(obj,key,val)%7Breturn%20isString(obj)&&obj%5Bkey%5D.match(val)%7D);validator(%22isString%22,function(obj,key)%7Breturn%20isString(obj%5Bkey%5D)%7D);validator(%22isArray%22,function(obj,key)%7Breturn%20isArray(obj%5Bkey%5D)%7D);validator(%22in%22,function(obj,key,val)%7Breturn-1%3Cindexof(val,obj%5Bkey%5D)%7D);validator(%22nin%22,function(obj,key,val)%7Breturn-1===indexof(val,obj%5Bkey%5D)%7D);%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-validate/index.js");
require.package("tower-query-to-topology", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20Topology=require(%22tower-topology%22).Topology;module.exports=queryToTopology;function%20queryToTopology(ns,constraints)%7Bvar%20topology=new%20Topology,name,constraint,action=constraints%5Bconstraints.length-1%5D%5B1%5D;for(var%20i=0,n=constraints.length;i%3Cn;i++)%7Bconstraint=constraints%5Bi%5D;switch(constraint%5B0%5D)%7Bcase%22select%22:case%22start%22:topology.stream(name=ns+%22.%22+action,%7Bconstraints:%5B%5D,collectionName:constraint%5B1%5D%7D);break;case%22constraint%22:topology.streams%5Bname%5D.constraints.push(%5Bconstraint%5B1%5D.attr,constraint%5B2%5D,constraint%5B3%5D%5D);break;case%22action%22:topology.streams%5Bname%5D.data=constraint%5B2%5D;break%7D%7Dreturn%20topology%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-query-to-topology/index.js");
require.package("tower-memory-adapter", "index.js"); require.module("index.js", "return function(exports, require, module, __filename, __dirname) {var%20adapter=require(%22tower-adapter%22),topology=require(%22tower-topology%22),action=require(%22tower-stream%22),filter=require(%22tower-filter%22),validate=require(%22tower-validate%22),queryToTopology=require(%22tower-query-to-topology%22);exports=module.exports=adapter(%22memory%22);exports.collections=%7B%7D;exports.type(%22string%22).type(%22text%22).type(%22date%22).type(%22float%22).type(%22integer%22).type(%22number%22).type(%22boolean%22).type(%22bitmask%22).type(%22array%22);action(%22memory.query%22).on(%22exec%22,query);action(%22memory.save%22).on(%22exec%22,create);action(%22memory.create%22).on(%22exec%22,create);action(%22memory.update%22).on(%22exec%22,update);action(%22memory.remove%22).on(%22exec%22,remove);exports.execute=function(constraints,fn)%7Bvar%20topology=queryToTopology(%22memory%22,constraints);topology.exec(fn);return%20topology%7D;exports.connect=function(name,fn)%7Bif(fn)fn()%7D;exports.disconnect=function(name,fn)%7Bif(fn)fn()%7D;exports.create=function(name,fn)%7Breturn%20exports.collections%5Bname%5D=%5B%5D%7D;exports.update=function(name,fn)%7B%7D;exports.remove=function(name,fn)%7Bdelete%20exports.collections%5Bname%5D;return%20exports%7D;exports.find=function(name,fn)%7Breturn%20exports.collections%5Bname%5D%7D;function%20collection(name)%7Breturn%20exports.collections%5Bname%5D%7C%7C(exports.collections%5Bname%5D=%5B%5D)%7Dfunction%20query(ctx,data,fn)%7Bvar%20records=collection(ctx.collectionName),constraints=ctx.constraints;if(constraints.length)%7Bctx.emit(%22data%22,filter(records,constraints))%7Delse%7Bctx.emit(%22data%22,records)%7Dfn()%7Dfunction%20create(ctx,data,fn)%7Bvar%20records=collection(ctx.collectionName),constraints=ctx.constraints;records.push.apply(records,ctx.data);ctx.emit(%22data%22,ctx.data);fn()%7Dfunction%20update(context,data,next)%7Bvar%20records=collection(context.collectionName),data=context.data,constraints=context.constraints;if(constraints.length)records=filter(records,constraints);for(var%20i=0,n=records.length;i%3Cn;i++)%7Bfor(var%20key%20in%20data)records%5Bi%5D%5Bkey%5D=data%5Bkey%5D%7Dcontext.emit(%22data%22,records)%7Dfunction%20remove(context,data,fn)%7Bvar%20records=collection(context.collectionName),constraints=context.constraints;var%20result=%5B%5D;if(constraints)%7Bvar%20i=records.length;while(i--)%7Bif(validate(records%5Bi%5D,constraints))%7Bresult.unshift(records.splice(i,1)%5B0%5D)%7D%7D%7Dcontext.emit(%22data%22,result);fn()%7D%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-memory-adapter/index.js");
require.package("tower-todomvc", "app.js"); require.module("app.js", "return function(exports, require, module, __filename, __dirname) {var%20tower=require(%22tower%22),app=tower.app,model=app.model,view=app.view,adapter=require(%22tower-adapter%22),query=require(%22tower-query%22),router=require(%22tower-router%22),route=router.route,noop=console.log;require(%22tower-memory-adapter%22);model(%22todo%22).attr(%22title%22).attr(%22completed%22,%22boolean%22,false).query(%22completed%22).where(%22completed%22).eq(true);route(%22/:filter%22).on(%22request%22,function(context)%7Balert(context.path)%7D);view(%22body%22).child(%22todos%22);view(%22todos%22,%22#todoapp%22).child(%22todo%22).on(%22keypress%22,%22#new-todo%22,createOnEnter).on(%22click%22,%22#clear-completed%22,clearCompleted).on(%22click%22,%22#toggle-all%22,toggleAllComplete);view(%22todo%22).on(%22create%22,function(x)%7Bthis.model.on(%22create%22,create)%7D).on(%22remove%22,noop).on(%22click%22,%22#toggle-edit%22,noop);function%20create(todo)%7Bview(%22todo%22)%7Dfunction%20createOnEnter(e)%7B%7Dfunction%20clearCompleted()%7Bmodel(%22todo%22).query(%22completed%22).destroy();return%20false%7Dfunction%20toggleAllComplete()%7Bvar%20completed=this.allCheckbox.checked;model(%22todo%22).save(%7Bcompleted:completed%7D)%7Drouter.start();exports.router=router;exports.model=model;exports.view=view;exports.query=query;exports.adapter=adapter;%20return%20(module.exports%20!==%20%7B%7D)%20?%20module.exports%20:%20exports;%20%7D;%20//@%20sourceURL=tower-todomvc/app.js");

















require("tower-todomvc")